# 索引

## 概念

索引就是把一个关键字与它对应的记录相关联的过程，一个索引由若干个索引项构成，每个索引项至少应包含关键字和其对应的记录在存储器中的位置等信息。

## 分类

### 索引按结构分

线性索引、树形索引和多级索引
其中线性索引分为稠密索引、分块索引和倒排索引。

## （1）稠密索引
指在线性索引中，将数据集中的每个记录对应一个索引项。索引项一定是按照关键码有序的排列。（注意：索引项与数据集的记录个数相同
索引项有序，意味着，我们查找的时候，可以用折半、插值、斐波那契等有序的查找算法。

## （2）分块索引：
是把数据集的记录分成了若干块，并且这些块需要满足：

### 1.块内无序

即每一块内不要求有序，当然你可以使其有序，不过代价很大（我们是为了优化稠密索引而思考出来的分块索引，怎么可能还去耗费那么大的性能去做此事）。

### 2.块间有序

即设定一定规则给每一个块，比如第二块的记录都比第一块的大。

#### 三个数据项：
##### 1.最大关键码

它存储每一块中的而最大关键字，这样的好处是可以使得在它之后的下一块中的最小关键字也能比这一块最大的关键字要大。

##### 2.存储个数

存储了块中的记录个数，以便于循环时使用。

##### 3.首数据

用于指向块首数据元素的指针，便于开始对这一块中记录进行遍历。

#### 分块索引查找步骤：
##### 第一步：

在分块索引表中查找要查关键字所在的块。分块索引表是块间有序的，所以可使用折半、插值等算法。

##### 第二步： 

根据块首指针找到相应的块，并在块中顺序查找关键码。因为块中可为无序，所以只能顺序查找。

#### 总述

分块索引比顺序查找效率高很多，但是与折半查找相比还不够。所以在确定所在块的过程中，由于块间有序，可使用折半、插值等优化。

## （3）倒排索引：
![这里写图片描述](http://img.blog.csdn.net/20170327120455123?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvSmFja19fRnJvc3Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)
### 概念
有索引项通用结构：1.次关键字，如上图“英文单词”；2.记录号表，如上图“文章编号
记录号表存储具有相同次关键字的所有记录的记录号（可以是指向记录的真正或是该记录的主关键字
源于实际中需要根据属性（或字段、次关键码）的值来查找记录。

### 优点

查找记录快；缺点：记录号不定长。

#### 应用

lucene技术基础就是这个倒排索引。
